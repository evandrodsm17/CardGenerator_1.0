<!DOCTYPE html>
<html lang="pt-BR">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="style.css">
    <script defer src="/script.js"></script>
    <title>CARD GENERATOR 1.0</title>
</head>

<body>
    <header class="cabecalho" id="header">
        <h1>CARD GENERATOR 1.0</h1>
        <p>Todos os direitos reservados - M17 TECNOLOGIA </p>
    </header>
    <section class="form" id="form">
        <div class="column">
            <label for="nome">NOME COMPLETO:</label>
            <input class="input-adm" type="text" id="nome" value="" name="nome"
                placeholder="NOME COMPLETO DO PACIENTE" required></input>
        </div>
        <div class="row">
            <div class="column">
                <label for="rg">RG:</label>
                <input class="input-adm" type="text" id="rg" value="" name="rg" placeholder="Exemplo: 99999999-99"
                    maxlength="11" required></input>
            </div>
            <div class="column">
                <label for="cpf">CPF:</label>
                <input class="input-adm" type="text" id="cpf" value="" name="cpf" placeholder="Exemplo: 999.999.999-99"
                    maxlength="14" required></input>
            </div>
            <div class="column">
                <label for="dn">DATA DE NASCIMENTO:</label>
                <input class="input-adm" type="text" id="dn" value="" name="dn"
                    placeholder="Exemplo: 01/01/2001" required></input>
            </div>
        </div>
        <div class="btn" id="btn" name="btn">
            <button class="btn-submit" onclick="addItem();">GERAR</button>
            <button class="btn-limpar" onclick="limpar();">LIMPAR</button>
        </div>
    </section>
    <section class="content" id="content">
        <!--- Conteúdo dinâmico --->
    </section>
    
    <section style="padding-top:10px;">
        <button class="btn-imprimir" id="btn-imprimir" style="width: 150px; height:25px; display: none;"
            onclick="cont()">Imprimir</button>
    </section>

<script type="text/javascript">

function addItem(valor) {

var dataatual = new Date();
var dia = String(dataatual.getDate()).padStart(2, '0');
var mes = String(dataatual.getMonth() + 1).padStart(2, '0');
var ano = dataatual.getFullYear();
var dataEmissao = dia + '/' + mes + '/' + ano;

const generateRandomString = (num) => {
    const characters = 'ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789@#$%&';
    let result1 = ' ';
    const charactersLength = characters.length;
    for (let i = 0; i < num; i++) {
        result1 += characters.charAt(Math.floor(Math.random() * charactersLength));
    }

    return result1;
}

var nome = document.querySelector('#nome').value;
var rg = document.querySelector('#rg').value;
var cpf = document.querySelector('#cpf').value;
var dn = document.querySelector('#dn').value;

if(nome === '' || rg === ''|| cpf === '' || dn === '') {
    alert('Existem campos obrigatórios vazios!')
    return
}

var vcode = generateRandomString(15);
var dtemi = dataEmissao;

add_li(nome, rg, cpf, dn, vcode, dtemi);

let el = document.getElementById('btn-imprimir');

el.style.cssText = 'display: block; width: 150px; height:25px;'

let card = document.getElementById('card');

card.style.cssText = 'display: flex';

}

function cont() {

let form = document.getElementById('form');

let header = document.getElementById('header');

let el = document.getElementById('btn-imprimir');

form.style.cssText = 'display: none';
header.style.cssText = 'display:none';
el.style.cssText = 'display: none;';

window.print();

}

function add_li(nome, rg, cpf, dn, vcode, dtemi){

// Cria os elementos

var content = document.querySelector('#content');
var card = document.createElement('div');
var card_front = document.createElement('div');
var card_front_text = document.createElement('div');
var card_front_header = document.createElement('div');
var card_front_header_logo = document.createElement('div');
var card_front_header_titulos = document.createElement('div');
var card_front_body = document.createElement('div');
var card_back = document.createElement('div');
var card_back_text = document.createElement('div');
var card_back_descricao = document.createElement('div');
var card_back_vcode = document.createElement('div');

// Estiliza os elementos

card.style.cssText = 
'display: flex; width: 700px; height: 200px; background-color: #e9e9e9; border:1px solid #171717; color: #000000; font-size:14px; font-weight: 300; border-radius: 4px';

card_front.style.cssText =
'width: 50%; padding:10px; border-right: 1px solid #0d0707;'

card_front_text.style.cssText  = 
'display: flex; flex-direction: column; gap:5px;'

card_front_header.style.cssText = 
'display: flex; align-items: center; justify-content: space-between; font-weight: 400;'

card_front_header_logo.style.cssText =
'width:110px;'

card_front_header_titulos.style.cssText =
'font-size:12px;'

card_front_body.style.cssText = 
'display: flex; flex-direction: column; gap:10px; font-size:12px; margin-top:30px;'

card_back.style.cssText = 
'width: 50%; padding:15px; display: flex; flex-direction: column; gap:12px; color: rgb(34, 34, 36); background-color: #e7e7e7;'

card_back_text.style.cssText =
'display: flex; justify-content: space-between; font-size: 11px;'

card_back_descricao.style.cssText =
'word-wrap: break-word; font-size:12px; height: 80px;'

card_back_vcode.style.cssText = 
'text-align: center; font-size:11px;'

// Insere os elementos

content.appendChild(card);

card.appendChild(card_front);

card.appendChild(card_back);

card_back.appendChild(card_back_text);

card_back.appendChild(card_back_descricao);

card_back.appendChild(card_back_vcode);

card_front.appendChild(card_front_text);

card_front_text.appendChild(card_front_header);

card_front_text.appendChild(card_front_body);

card_front_header.appendChild(card_front_header_logo);

card_front_header.appendChild(card_front_header_titulos);

// Insere conteúdo nos elementos

card_front_header_logo.innerHTML = '<img src="https://uploaddeimagens.com.br/images/004/093/800/full/logopref.png?1667814580" alt="logopref" width="110px" />';

card_front_header_titulos.innerHTML = '<p style="font-size:13px;">CARTEIRINHA DE PRIORIDADE<p><p style="color:#6101b4; font-size:12px;">PESSOA COM FIBROMIALGIA</p>'

card_front_body.innerHTML = 
'<p><strong>NOME:</strong> <span class="cnome" id="cnome" name="cnome">' + nome + '</span></p>' + '<p><strong>RG: </strong><span class="crg" id="crg" name="crg">' + rg +'</span></p>'
+ '<p><strong> CPF: </strong><span class="ccpf" id="ccpf" name="ccpf">' + cpf + '</span></p>' + '<p><strong>DATA DE NASCIMENTO:</strong> <span class="cdn" id="cdn" name="cdn">' + dn +'</span></p>'

card_back_text.innerHTML = 
'<p>LEI MUNICIPAL Nº 340/2020</p><p>DATA DE EMISSÃO: <span class="dtemi" id="dtemi" name="dtemi">' + dtemi +'</span></p>'

card_back_descricao.innerHTML =
'<p>Pessoas com diagnóstico de fibromialgia tem direito ao atendimento prioritário em estabelecimentos públicos.</p>'

card_back_vcode.innerHTML = 
'<p>CÓDIGO DE VERIFICAÇÃO:</p><span class="vcode" id="vcode" name="vcode">'+ vcode + '</span>'
}

function limpar(){
var nome = document.querySelector('#nome');
var rg = document.querySelector('#rg');
var cpf = document.querySelector('#cpf');
var dn = document.querySelector('#dn');

nome.value = '';
rg.value = '';
cpf.value = '';
dn.value = '';
}

</script>
</body>

</html>
